# 5-7. 프록시와 안정적인 트래픽

## ✅ 오리진 서버와 중간 서버: 포워드 프록시와 리버스 프록시
- **오리진 서버**: 자원을 생성하고 응답을 보낼 수 있는 HTTP 서버.
- **중간 서버**: 클라이언트와 오리진 서버 사이에 위치하며, 대표적으로 **프록시**(포워드 프록시)와 **게이트웨이**(리버스 프록시)가 있음.
  - **포워드 프록시**: 클라이언트와 가깝고, 클라이언트의 요청을 대신함.
  - **리버스 프록시**: 오리진 서버와 가깝고, 서버로 향하는 요청을 처리하며 클라이언트는 이를 오리진 서버로 인식.

## ✅ 고가용성: 로드 밸런싱과 스케일링

### 가용성
- **가용성**: 정상적인 사용 시간 비율.  
  - **업타임**: 정상적인 사용 시간  
  - **다운타임**: 사용 불가능 시간  
  - **고가용성**: 높은 업타임 비율을 유지하기 위한 설계 (결함 감내)

### 헬스 체크와 하트비트
- **헬스 체크**: 로드 밸런서가 서버 상태를 주기적으로 확인.
- **하트비트**: 서버 간 주기적인 메시지 교환으로 상태를 모니터링.

### 로드 밸런싱
- **로드 밸런싱**: 트래픽을 다수의 서버에 고르게 분배하여 서버 가용성 확보.
  - **로드 밸런서**: 클라이언트 요청을 균등하게 분배.
  - **대표 SW**: HaProxy, Envoy, Nginx
  - **로드 밸런싱 알고리즘**:
    - **라운드 로빈**: 서버를 순차적으로 선택.
    - **최소 연결**: 연결 수가 적은 서버에 우선 분배.
  - **성능 차이**: 성능 좋은 서버에 더 많은 트래픽을 분배하는 가중치 설정 가능.

### 스케일링
- **스케일 업**: 기존 부품의 성능을 높여 수직 확장.
  - **장점**: 설치와 구성 단순.
- **스케일 아웃**: 여러 대의 부품을 추가하여 수평 확장.
  - **장점**: 유연한 확장/축소, 고장난 장비의 역할 대체 가능.

### 오토스케일링
- **오토스케일링**: 트래픽 급증 시 동적으로 자원 확장/축소, 효율적이고 경제적인 자원 사용.

## ✅ Nginx로 알아보는 로드 밸런싱
- **Nginx**: 포워드/리버스 프록시 기능 제공, 로드 밸런싱 가능.
  - **중요 설정 파일**:
    1. `${nginx}/nginx.conf`: 기본 설정 파일.
    2. `${nginx}/log/nginx/`: 로그 저장.
    3. `${nginx}/conf.d/`: 추가 설정 파일.
  
### 업스트림/다운스트림과 인바운드/아웃바운드
- **업스트림**: 클라이언트 → 오리진 서버.
- **다운스트림**: 클라이언트 ← 오리진 서버.
- **인바운드**: 외부 → 내부.
- **아웃바운드**: 내부 → 외부.
