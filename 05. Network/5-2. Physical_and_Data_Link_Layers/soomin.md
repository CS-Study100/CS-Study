# 5-2. 물리 계층과 데이터 링크 계층
## ✅이더넷
- Ethernet : 통신 매체를 통해 신호를 송수신하는 방법, 데이터 링크 계층에서 주고받는 데이터 형식등이 정의된 기술 
- 현대 대부분의 LAN은 이더넷을 기반으로 구현

### ▶️이더넷 표준
- IEEE 802.3 : 이더넷과 관련된 다양한 표준들의 모음 
  - 802.3 뒤에 붙은 알파벳으로 버전을 나타냄 
- 서로 다른 제조사의 장비라도 관련 표준을 준수하여 제작되면 NW장비와 문제없이 호환 가능
- 이더넷 관련 기억할 2가지
  1️⃣오늘날의 LAN 대부분이 이더넷 표준을 따르기 때문에 대다수의 LAN 장비들이 특정 이더넷 표준을 따른다.
  2️⃣이더넷 표준이 달라지면 통신 매체의 종류를 비롯한 신호 송수신 방법, 나아가 최대 지원 속도도 달라질 수 있다.

### ▶️이더넷 프레임
- 이더넷 기반의 NW에서 주고받는 프레임
- 오늘날 주로 사용되는건 Ethernet Ⅱ 프레임 

**프레임을 구성하는 5가지 정보**

1️⃣프리앰블 
- 송수신지 동기화를 위해 사용되는 8바이트 크기의 정보
- 수신지 입장에서는 이 프리앰블 비트를 통해 현재의 이더넷 프레임이 수신되고 있다는 사실을 알아차림

2️⃣송수신지 MAC 주소
- 송신지와 수신지를 특정할 수 있는 6바이트
- 콜론으로 구분된 12자리 16진수 (ab:cd:ab:cd:00:01)
- MAC주소는 NW인터페이스마다 하나씩 부여

3️⃣타입/길이
- 1500이하 → 프레임의 크기
- 1536이상 → 타입
- 타입 : 캡슐화된 상위 계층의 정보 

4️⃣데이터
- 상위 계층으로 전달하거나 전달받을 데이터인 페이로드
- 데이터 필드에 포함될 수 있는 데이터의 최대 크기가 정해져 있음 
- '1500바이트' 보다 큰 데이터를 보내면 여러 패킷 단위로 나뉨 

5️⃣FCS
- Frame Check Sequence = 트레일러 
- 프레임의 오류 여부 확인 위해 CRC(Cyclic Redundancy Check)라는 오류 검출용 값 명시
- 송신지와 수신지의 CRC를 대조해 두 값이 같으면 오류 없다고 판단 

## ✅유무선 통신 매체
- 물리 계층과 데이터 링크 계층에 속한 다양한 통신 매체와 NW장비들 

### ▶️유선 매체 - 트위스티드 페어 케이블
- 구리선을 통해 전기적으로 신호를 주고받는 통신 매체 
  - 전기 신호에 왜곡을 주는 주변 잡음에 취약 = 노이즈에 취약
  - 그물 모양의 철사나 포일로 감싸서 노이즈를 방지
  - 구리선 주변을 보호해 노이즈를 감소시키는 방식은 차폐(shielding)
  - 차폐에 사용된 그물 모양의 철사는 브레이드 실드, 포일은 포일 실드 
  - 브레이드 실드로 노이즈를 감소시킨 케이블은 ShieldedTP 케이블, 포일 실드는 FoilTP 케이블
  - 아무것도 감싸지 않고 구리선만 있는 케이블은 UnshieldedTP 케이블 
- 카테고리는 성능을 구분하는 일종의 등급 역할 
- 카테고리에 따라 대응되는 주요 이더넷 표준이 다르고, 표준에 따른 최대 지원 속도도 달라짐 

### ▶️무선 매체 - 전파와 WiFi
- 전파는 약 3kHz ~ 3THz 사이의 진동수를 갖는 전자기파
  - 2.4GHz ~ 5GHz는 와이파이를 사용할 때 주로 활용 
- 유선LAN 대표 기술 = 이더넷
- 무선LAN 대표 기술 = WiFi
- 와이파이는 IEEE 802.11표준을 따름
  - '802.11'숫자 뒤에 붙은 알파벳으로 각기 다른 표준 규격을 구분 
  - 표준 규격에 따라 지원되는 최대 속도나 주파수 대역 등이 달라짐 
  - 와이파이 세대에 따라 지원되는 표준 규격이 다름 
- 전파 통신을 주고받을 때 주파수 대역이 겹치면 신호의 간섭이 발생 
  - 간섭으로 인한 성능 저하가 발생함 
  - 별개의 무선 NW는 같은 대역을 사용하더라도 서로의 신호에 간섭하면X → 채널이라는 하위 주파수 대역으로 세분화 
    - 채널은 기본 자동 설정, 수동 설정도 가능 
    
## ✅네트워크 인터페이스: NIC
- NW인터페이스: NW상에서 노드와 통신 매체가 연결되는 지점, 
  - 노드와 NW 사이의 통로와 같음, 노드가 NW를 통해 송수신되는 정보가 NW 인터페이스를 거치는 셈 
- NW인터페이스마다 물리적 주소라고 불리는 MAC주소 부여됨
- NetworkInterfaceController 하드웨어가 NW 인터페이스 역할을 담당
  - `통신 매체의 신호` ←변환 역할 수행→ `호스트가 이해하는 프레임`
  - MAC 주소를 토대로 잘못 전송된 패킷이 없는지 확인 
- NIC의 동작은 입출력 장치와 동일 
  - NIC를 작동시키는 시스템 콜이 호출 → 커널모드로 전환 → 송수신 수행 → 입출력 완료 → 인터럽트 → CPU에게 알림 
  - NIC의 지원속도가 저마다 다름 
  
## ✅허브와 스위치
- 물리 계층과 데이터 링크 계층의 중간 노드
- 허브는 오늘날 잘 사용X, 대신 스위치를 사용

### ▶️물리 계층의 허브
- 허브는 물리 계층의 대표적인 NW 장비로, 여러 호스트를 연결하는 장치
- 리피터 허브, 이더넷 NW의 허브는 이더넷 허브
- 포트 : 허브에서 케이블의 커넥터가 꽂히는 부분, 통신 매체를 연결하는 지점
- 2가지 주요 특징
  - 전달받은 신호를 모든 포트로 내보냄
    - 신호를 전달받으면 어떠한 조작이나 판단 없이 모든 포트에 단순하게 신호를 보냄 
  - 반이중 모드로 통신 
    - 반이중 모드 : 송신 또는 수신을 번갈아 가면서 수행해야 하는 통신 방식 (무전기)
    - 동시 송수신이 불가능한 상태 
    - 스위치는 전이중 모드를 지원
      - 전이중 모드 : 동시 송수신이 가능한 상태 (전화)
    
🔷 허브를 향해 동시에 메시지를 보내면 충돌 문제 발생 - 반이중 모드
🔷 콜리전 도메인(출동이 발생할 수 있는 영역)은 허브에 연결된 모든 호스트가 됨 - 신호 모든 포트에 보냄

### ▶️데이터 링크 계층의 스위치
- 스위치: 허브의 한계를 보완하기 위한 NW 장비
- 전달받은 신호를 목적지 호스트가 연결된 포트로만 내보냄, 전이증 모드를 지원 → 콜리전 도메인이 좁다 
- MAC 주소 학습 기능으로 원하는 포트에만 신호를 내보낼 수 있음 
  - 프레임 헤더에 MAC 주소가 명시됨 
  - 데이터 링크 계층에 속한 스위치는 MAC주소 이해 가능
  - 어떻게? MAC 주소 테이블을 생성하고 참조
    - 스위치는 MAC 주소를 토대로 '포트, 연결된 호스트의 MAC 주소'의 대응관계를 테이블의 형태로 메모리에 저장 
- VLAN : 가상의 LAN
  - 같은 스위치에 연결된 모든 호스트를 하나의 NW로 간주하고 싶지 않을 때 사용
  - 여러 논리적인 NW로 나누고 싶을 때 사용
  
