## 3-2. 프로세스와 스레드

- 포그라운드 프로세스(foreground process): 사용자가 보는 공간에서 사용자와 상호작용하며 실행
- 백그라운드 프로세스(background process): 사용자가 보지 못하는 곳에서 실행
  - 데몬(daemon): 사용자와 별다른 상호작용 없이 주어진 작업만 수행하는 특별한 백그라운드 프로세스

1. 코드 영역(code segment, 텍스트 영역): 실행 가능한 명령어가 저장되는 공간(읽기 전용 공간)
2. 데이터 영역(data segment): 프로그램이 실행되는 동안 유지할 데이터가 저장되는 공간(정적 변수, 전역 변수)
3. 힙 영역(heap segment): 사용자가 직접 할당 가능한 저장 공간, 메모리 공간을 반환하지 않으면 메모리 누수 문제 초래 ➡️ 가비지 컬렉션 기능을 제공하기도 함
4. 스택 영역(stack segment): 일시적으로 사용할 값들이 저장되는 공간(매개변수, 지역변수, 함수 복귀 주소)

### 1️⃣ PCB와 문맥 교환

- PCB(Process Control Block): 프로세스와 관련된 다양한 정보를 담는 구조체의 일종, 새로운 프로세스가 메모리에 적재됐을 때 커널 영역에 생성되고, 프로세스 실행이 끝나면 폐기됨
- PID, 레지스터값, 프로세스 상태, CPU 스케줄링 정보, 메모리 관련 정보, 파일 및 입출력장치 관련 정보 명시

- 프로세스 테이블: 실행중인 PCB의 모음
- 좀비 프로세스(zombie process): 프로세스가 비정상 종료되어 사용한 자원이 회수되었음에도 프로세스 테이블에 종료된 프로세스의 PCB가 남아 있는 경우의 비정상 종료 상태

- 문맥(context): 프로세스의 수행을 재개하기 위해 기억해야 할 정보
- 운영체제는 프로세스의 PCB에 문맥을 백업하여 뒤이어 실행할 프로세스의 문맥을 복구함
- 문맥 교환(context switch): 기존 프로세스의 문맥을 PCB에 백업하고, PCB에서 문맥을 복구하여 새로운 프로세스를 실행하는 것

📍 문맥교환이 잦으면 캐시 미스가 발생할 가능성이 높아져 메모리로부터 실행할 프로세스의 내용을 가져오는 작업이 많아지고 큰 오버헤드가 생김

### 2️⃣ 프로세스의 상태

- 생성 상태(new): 메모리에 적재되어 PCB를 할당받은 상태
- 준비 상태(ready): 프로세스가 CPU를 할당 받아 실행하기 위해 기다리고 있는 상태, (준비 -> 실행: 디스패치)
- 실행 상태(running): CPU를 할당 받아 실행 중인 상태
- 대기 상태(blocked): 프로세스가 입출력 작업을 요청하거나 바로 확보할 수 없는 자원을 요청하는 경우 대기 상태가 됨
- 종료 상태(terminated): 프로세스 종료된 상태

📍 블로킹 입출력과 논블로킹 입출력

- 블로킹 입출력: 작업이 완료됐는지 확인할 때까지 대기 상태로 접어든느 경우
- 논블로킹 입출력: 실행 결과를 기다리지 않고 곧바로 다음 명령을 수행하는 경우

### 3️⃣ 멀티프로세스와 멀티스레드

- 멀티프로세스: 동시에 여러 프로세스가 실행되는 것(각기 다른 프로세스들이 자원을 공유하지 않고 독립적으로 실행됨)
- 멀티스레드: 프로세스를 동시에 실행하는 여러 스레드
  📍 자원의 공유 여부에 따라!!

### 4️⃣ 프로세스 간 통신

- IPC: 프로세스 간에도 자원을 공유하고 데이터를 주고 받을 수 있는 방법

1. 공유 메모리(shared memory): 프로세스 간 공유하는 메모리 영역을 토대로 데이터를 주고받는 통신 방식
   - 마치 자신의 메모리 영역을 읽고 쓰는 것처럼 통신
   - 프로세스가 데이터를 주고받는 과정에 커널의 개입이 거의 없음

- 통신 속도 빠름
- 동시에 공유 메모리에 접근할 때 데이터의 일관성이 훼손될 수 있음

2. 메시지 전달: 프로세스 간에 주고 받을 데이터가 커널을 거쳐 송수신되는 통신 방식
   - 레이스 컨디션, 동기화 등의 문제는 적음
   - 데이터가 커널을 통해 송수신되므로 공유 메모리 기반 IPC보다 통신 속도는 느림
   - 파이프(pipe): 단방향 프로세스 간 통신 도구
   - 시그널(signal): 프로세스에게 특정 이벤트가 발생했음을 알리는 비동기적인 신호
   - RPC: 원격 코드를 실행하는 IPC 기술

- 레이스 컨디션(race condition): 프로세스 혹은 스레드가 동시에 임계 구역의 코드를 실행하여 문제가 발생하는 상황
