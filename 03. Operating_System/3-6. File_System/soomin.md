# 03-6. 파일 시스템
- 파일 시스템 : 보조기억장츼의 정보를 파일 및 디렉터리 형태로 저장하고 관리할 수 있도록하는 OS내부 프로그램 

## ✅파일과 디렉터리
### ▶️파일
- 파일의 이름
- 파일을 실행하기 위한 정보
- 파일과 관련한 부가 정보
  - 속성 또는 메타 데이터 
- **파일 디스크립터**(파일 핸들 - win)
  - 운영체제에서 파일을 식별하기 위한 저수준 정보
  - 리눅스를 비롯한 여러 OS에서는 입출력장치, IPC 등도 일종의 파일로 간주해 파일 디스크립터로 식별하고 다룰 수 있음
  - 파일뿐만 아니라 표준 입력(0), 표준 출력(1), 표준 에러(2)와 같은 입출력 스트림도 식별 가능 
- APP에서 새로운 파일에 입력하고 저장, 컴퓨터 내부에는 어떤 일이?
  - APP이 open()시스템 콜을 통해 OS에 파일을 생성하도록 요청
  - CPU가 사용자 모드 -> 커널 모드
  - OS가 커널 공간에서 파일 생성 코드를 실행하고, 파일 시스템에 접근해 새로운 파일을 생성 
  - APP은 write() 시스템 콜을 사용하여 생성한 파일에 작성 
  - 작성 끝나면 close() 시스템 콜을 호출하여 파일 닫기 
  - 작업 완료되면 다시 사용자 모드로 전환 
  
### ▶️디렉터리
- 오늘날의 디렉터리는 여러 계층을 가진 트리 구조 디렉터리로 관리
- 루트 디렉터리 = /
- 경로 : 디렉터리 정보를 활용해 파일 위치를 특정하는 정보
- 디렉터리 엔트리 : 테이블의 형태로 표현된 정보의 행 하나 하나를 뜻함 

### ▶️파일 할당
- 블록 : OS가 파일과 디렉터리를 읽고 쓰는 단위 
- 연결 할당 : 블록의 일부에 다음 블록의 주소를 저장하여 각각의 블록이 다음 블록을 가리키는 형태 
- 색인 블록 - 색인 할당 
  - 색인 블록만 알면 접근하고자 하는 파일 데이터에 접근 가능 

## ✅파일 시스템
- 공장 초기화된 보조기억장치, 파일 시스템을 만들고, 텍스트 파일을 저장하기 까지의 과정
  - 파티션 생성하고 포매팅하여 파일 시스템 생성
  - 파일 시스템을 마운트
  - 파일 탐색기나 터미널을 통해 텍스트 파일을 생성하고 저장
- 포매팅 : 파일 시스템을 설정하여 어떤 방식으로 파일을 저장하고 관리할 것인지를 결정하고 새로운 데이터를 쓸 준비를 하는 작업 
- 아이노드를 기반으로 파일을 할당 
  - 아이노드 : 파일이 저장된 위치와 속성 등, 파일 이름을 제외한 파일의 모든 것이 담겨 있는 색인 블록 
  
### ▶️아이노드 기반 파일 시스템 
- EXT4 파일 시스템에서 디렉터리 내 파일의 데이터를 찾는 과정
  - 파일이 속한 디렉터리에 파일 이름에 해당하는 디렉터리 엔트리를 찾고, 해당 파일의 아이 노드 번호를 얻음
  - 아이노드 번호를 이용하여 아이노드 테이블에서 해당 아이노드를 찾음
  - 아이노드를 통해 실제 파일 데이터가 저장된 위치에 접근 가능  

### ▶️마운트 
- 마운트 : 어떤 저장장치의 파일 시스템에서 다른 저장장치의 파일 시스템으로 접근할 수 있도록 파일 시스템을 편입시키는 작업을 의미 
