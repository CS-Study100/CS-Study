## 3-5. 가상 메모리

### 1️⃣ 물리 주소와 논리 주소

- 메모리 관리 장치(MMU, Memory Management Unit): CPU와 메모리 사이에 위치하며, CPU가 이애하는 논리 주소를 메모리가 이해하는 물리 주소로 변환하는 역할

### 2️⃣ 스와핑과 연속 메모리 할당

1. 스와핑: 대기 상태이거나 오랫동안 사용되지 않은 프로세스를 임시로 스왑 영역이라는 보조기억장치의 일부 영역으로 쫓아내고, 쫓아낸 자리에 다른 프로세스를 적재하여 실행하는 메모리 관리 방식
   - 스왑 아웃(swap-out): 현재 실행되지 않는 프로세스가 메모리에서 스왑 영역으로 옮겨지는 것
   - 스왑 인(swap-in): 스왑 영역에 잇는 프로세스가 다시 메모리로 옮겨오는 것
2. 연속 메모리 할당과 외부 단편화
   - 연속 메모리 할당: 프로세스에 연속적인 메모리 공간을 할당하는 방식
   - 외부 단편화(external fragmentation): 프로세스들이 연속적으로 할당되는 환경에서 메모리 사이 사이에 빈 공간이 생기는 현상

### 3️⃣ 페이징을 통한 가상 메모리 관리

- 가상 메모리(virtual memory): 실행하고자 하는 프로그램의 일부만 메모리에 적재하여 실제 메모리보다 더 큰 프로세스를 실행할 수 있도록 만드는 메모리 관리 기법

1. 페이징(paging): 프로세스의 논리 주소 공간을 페이지로 일정하게 나누고, 물리 주소 공간을 페이지와 동일한 크기의 프레임으로 일정하게 나눈 뒤, 페이지를 프레임에 할당하는 가상 메모리 관리 기법
   - 페이징을 통해 물리 메모리보다 큰 크기의 프로세스도 실행할 수 있음
2. 페이지 테이블
   - 프로세스의 페이지와 실제로 적재된 프레임을 짝지어주는 정보

- 내부 단편화(internal fragmentation): 페이지 하나의 크기보다 작은 크기로 발생하게 되는 메모리 낭비
- 페이지 테이블 베이스 레지스터(PTBR): 특정 프로세스의 페이지 테이블이 적재된 메모리 상의 위치를 가리키는 레지스터

1. 메모리 접근 횟수
   - TLB(Translation Look-aside Buffer): 페이지 테이블의 캐시, 참조 지역성의 원리에 근거해 자주 사용할 법한 페이지 위주로 페이지 테이블의 일부를 저장
2. 메모리 용량
   - 계층적 페이징: 여러 단계의 페이지를 두는 것

### 4️⃣ 페이징 주소 체계

- <페이지 번호, 변위>로 구성
- 페이지 번호: 몇 번째 페이지 번호에 접근할지를 나타냄
- 변위(offset): 접근하려는 주소가 페이지 시작 번지로부터 얼만큼 떨어져 있는지를 나타냄

### 5️⃣ 페이지 교체 알고리즘

- 요구 페이징(demand paging): 메모리에 프로세스를 적재할 때, 모든 페이지를 적재하지 않고 메모리에 필요한 페이지만 적재하는 기법
- 페이지 교체 알고리즘: 메모리에 적재된 페이지 중 보조기억장치로 내보낼 페이지를 선택하는 방법

📍 스래싱(thrashing): 프로세스가 실제로 실행된느 시간보다 페이징에 더 많은 시간을 소요하여 성능이 저하되는 문제

1. FIFO 페이지 교체 알고리즘: 메모리에 가장 먼저 적재된 페이지부터 스왑 아웃
2. 최적 페이지 교체 알고리즘: 앞으로 가장 적게 사용할 페이지를 예측하여 스왑 아웃
3. LRU 페이지 교체 알고리즘: 가장 적게 사용한 페이지를 스왑 아웃
