# 2-4 메모리

## ✅ RAM (Random Access Memory)
- **휘발성 저장장치 (volatile memory)**: 전원을 끄면 저장하고 있던 데이터와 명령어가 날아감
- CPU가 실행할 대상을 저장하는 부품
- **RAM 용량 ⬆, 실행 시간 ⬆**
    - RAM 용량이 커지면 실행 시간이 증가하지만, 반드시 성능이 비례하여 향상 X
- **임의 접근 (Random Access)**
    - 저장된 요소에 순차적으로 접근할 필요 없이 임의의 위치에 곧장 접근 가능한 방식 (직접 접근)
    - 데이터에 접근하는 시간은 동일

## ✅ RAM 종류
- **DRAM (Dynamic RAM)**: 시간이 지나면 저장된 데이터가 사라짐. 데이터를 재활성화(다시 저장) 해야 함
  - 소비 전력 ⬇️, 저렴, 집적도 ⬆️.
  - 대용량 설계에 용이하여 일반적으로 사용.
- **SRAM (Static RAM)** : 시간이 지나도 저장된 데이터가 사라지지 않음
    - 비휘발성 저장장치 X → 전원이 공급되지 않으면 소실됨
    - DRAM에 비해 속도가 빠름 → 캐시 메모리 등에서 사용
- **SDRAM (Synchronous Dynamic RAM)** : 클럭 신호와 동기화된 DRAM.
- **DDR SDRAM (Double Data Rate SDRAM)** : 대역폭을 넓혀 속도를 빠르게 만든 SDRAM
    - 대역폭 (data rate) : 데이터를 주고받을 길의 너비
    - 너비가 두배인 자동차 도로와 같음
        - SDRAM - 한 클럭당 하나씩 데이터를 주고받음
        - DDR SDRAM - SDRAM 보다 전송 속도가 두 배 가량 빠름
- **DDR N (숫자 N) SDRAM** : 2^N 배 넓은 SDRAM

---

## ✅ 캐시 메모리 (Cache Memory)
- **목적**: CPU와 메모리 접근 속도의 차이를 줄이기 위해
- CPU와 메모리 사이에 위치한 SRAM 기반의 저장장치
- CPU가 사용할 데이터를 미리 캐시 메모리로 가져와 활용

### 캐시 메모리 종류
- **L1 캐시 (Level 1 Cache)**: 코어와 가장 가까운 캐시 메모리.
- **L2 캐시 (Level 2 Cache)**: 그다음 가까운 캐시 메모리.
- **L3 캐시 (Level 3 Cache)**: 그다음 가까운 캐시 메모리.

|  캐시 종류  |   위치    |    크기    |   속도    |
|-----------|---------|-----------|----------|
| L1        | 코어 내부 | 가장 작음  | 가장 빠름 |
| L2        | 코어 내부 | 중간 크기  | 중간 속도 |
| L3        | 코어 외부 | 가장 큼    | 가장 느림 |

- **데이터 탐색 순서**: CPU가 메모리 내에서 데이터를 찾을 때 L1 캐시부터 확인, 없으면 L2, L3 캐시 순으로 탐색

### 멀티코어 프로세서의 캐시 메모리
- **L1 캐시**와 **L2 캐시**는 각 코어마다 고유한 캐시 메모리로 할당
- **L3 캐시**는 여러 코어가 공유하는 형태로 구현.

### 분리형 캐시 (Split Cache)
- **L1 캐시**: 명령어만 저장.
- **L1D 캐시**: 데이터만 저장.

### 캐시 히트와 캐시 미스
- **캐시 히트 (Cache Hit)**: 캐시 메모리가 예측하여 저장한 데이터가 CPU에 의해 실제로 사용되는 경우
- **캐시 미스 (Cache Miss)**:  틀린 예측으로 인해 CPU가 메모리로부터 필요한 데이터를 직접 가져와야 하는 경우
  
### 캐시 적중률 (Cache Hit Ratio)
- **공식**:  캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)


### 참조 지역성의 원리 (Locality of Reference)
- 특정한 원칙에 따라 메모리로부터 가져올 데이터를 결정
- **시간 지역성 (Temporal Locality)**: 최근에 접근한 메모리 공간에 다시 접근하려는 경향.  
예: 변수.
- **공간 지역성 (Spatial Locality)**: 접근한 메모리 공간의 근처에 접근하려는 경향.  
예: 배열.

---

## ✅ 캐시 메모리의 쓰기 정책과 일관성

### 캐시 메모리에 데이터를  쓰는 경우
- CPU가 캐시 메모리에 데이터를 쓸 때는 캐시 메모리에 새롭게 쓰여진 데이터와 ㅔㅁ모리 상의 데이터가 일관성을 유지해야 함

### 캐시 메모리와 메모리 간의 불일치 방지
- **즉시 쓰기 (Write-through)**: 캐시와 메모리에 데이터를 동시에 기록.
- 장점: 데이터 일관성 유지.
- 단점: 캐시 속도 느림.
- **지연 쓰기 (Write-back)**: 캐시 메모리에만 기록하고, 메모리는 일정 시점에 한 번에 기록.
- 장점: 속도 빠름.
- 단점: 데이터 일관성 위협.

### 캐시 메모리를 사용한다는 것, 나아가 캐싱을 한다는 것
- 데이터 접근에 있어 어느 정도의 빠른 성능은 보장
    - 자주 사용할 법한 대상을 가까이 위치시킴으로써 성능 향상을 꾀함
- 캐싱을 할 때는 언제나 캐시된 데이터와 원본 데이터 간의 불일치와 데이터의 일관성을 고려

