## 2-3. CPU

### ✔️ 레지스터

CPU 안에 있는 작은 임시 저장장치

1. 프로그램 카운터
   - 메모리에서 다음으로 읽어들일 명령어의 주소 저장
2. 명령어 레지스터
   - 메모리에서 방금 읽어 들인 명령어를 저장
3. 범용 레지스터
   - 데이터, 명령어, 주소를 모두 저장
4. 플래그 레지스터
   - 연산의 결과 또는 CPU 상태에 대한 부가 정보를 저장
   - 부호 플래그, 제로 플래그, 오버플로우 플래그, 인터럽트 플래그, 슈퍼바이저 플래그
5. 스택 포인터
   - 스택 영역의 최상단 스택 데이터 위치를 가리키는 특별한 레지스터

### ✔️ 인터럽트

**CPU의 작업을 방해하는 신호**

- **동기 인터럽트(예외)**: CPU에 의해 발생하는 인터럽트
- **비동기 인터럽트(하드웨어 인터럽트)**: 주로 입출력장치에 의해 발생하는 인터럽트

- 폴링(polling): 입출력장치의 상태와 처리할 데이터가 있는지 주기적으로 확인하는 것

### ✔️ 하드웨어 인터럽트

입출력 완료 여부를 확인하기 위한 CPU 사이클 낭비를 최소화하고, CPU가 다른 일을 수행할 수 있는 시간을 늘려줌으로써 효율적으로 명령어를 처리

📍 **CPU가 인터럽트를 처리하는 순서**

1. 입출력장치가 CPU로 인터럽트 요청 신호 보냄
2. CPU는 실행 사이클을 끝내고 명령어 인출 전 항상 인터럽트 여부 확인
3. CPU가 인터럽트 요청을 확인하고 인터럽트 플래그를 통해 인터럽트를 받아들일 수 있는지 여부 확인
4. 인터럽트를 받아들일 수 있다면 CPU는 지금까지의 작업을 백업해둠
5. 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴(인터럽트 핸들러) 실행
6. 인터럽트 서비스 루틴이 끝나면 백업해 둔 작업을 복구하여 실행 재개

📍 인터럽트 벡터

- 인터럽트 서비스 루틴을 식별하기 위한 정보

### ✔️ 예외

- 폴트(fault): 예외를 처리한 직후 예외가 발생한 명령어부터 실행 재개
- 트랩(trap): 예외를 처리한 직후 예외가 발생한 명령어의 다음 명령어부터 실행 재개
- 중단(abort): CPU가 실행 중인 프로그램을 강제로 중단시킬 수밖에 없는 심각한 오류를 발견했을 때

### ✔️ CPU 성능 향상

- CPU 클럭 속도 ⬆️
- 멀티코어와 멀리스레드(논리 프로세서) ⬆️
  - 병렬성: 작업을 물리적으로 동시에 처리하는 성질 ➡️ 하드웨어 스레드
  - 동시성: 동시에 작업을 처리하는 것처럼 보이는 성질 ➡️ 소프트웨어 스레드
- 파이프라이닝을 통한 명령어 병렬 처리
  - 명령어 인출
  - 명령어 해석
  - 명령어 실행
  - 결과 저장

📍 **CISC와 RISC**

- CISC: 적은 수의 복잡한 명령어로 프로그램 실행 가능
- RISC: 많은 수와 짧고 규격화된 명령어로 프로그램 실행 가능 ➡️ 파이프라이닝에 최적화

📍 **파이프라인 위험**

- 데이터 위험(data hazard): 명령어 간의 데이터 의존성에 발생
- 제어 위험(control hazard): 프로그램 카운터의 갑작스러운 변화에 의해 발생
- 구조적 위험(structural hazard), 자원 위험: 명령어들을 겹쳐 실행하는 과정에서 서로 다른 명령어가 CPU 부품을 사용하려 할 때 발생
